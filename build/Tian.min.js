/*! Tian 2014-04-10 */
!function(){var a=window.$,b=window.Tian=window.$=function(a){return new b.fn.init(a)};b.VERSION="1.0.0",b.fn=b.prototype={constructor:b,init:function(a){return a=a||document,a.nodeType?(this[0]=a,this):("string"==typeof a&&(this[0]=document.getElementById(a)),this)},ready:function(a){return b.Event.readyEvent(a),this},html:function(a){return"undefined"!=typeof a?(this[0].innerHTML=a,this):this[0].innerHTML},css:function(a,c){return"undefined"!=typeof c?(b.dom.setStyle(this[0],a,c),this):"string"==typeof a?b.dom.getStyle(this[0],a):"object"==typeof a?(b.dom.setStyle(this[0],a),this):void 0},attr:function(a,b){return"undefined"==typeof b?this[0].getAttribute(a):(this[0].setAttribute(a,b),this)},val:function(a){return"undefined"==typeof a?this[0].value:(this[0].value=a,this)},hasClass:function(a){return b.dom.hasClass(this[0],a)},addClass:function(a){return b.dom.addClass(this[0],a),this},removeClass:function(a){return b.dom.removeClass(this[0],a),this},bind:function(a,c){return b.Event.addEvent(this[0],a,c),this},unbind:function(a,c){return b.Event.removeEvent(this[0],a,c),this},show:function(){return this.css("display","block"),this},hide:function(){return this.css("display","none"),this},setOpacity:function(a){return this[0].filters?this[0].style.filter="alpha(opacity="+a+")":this[0].style.opactiy=a/100,this},slide:function(){}},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(a,b){b||(b=a,a=this);for(var c in b)a[c]=b[c];return a},b.extend(b.prototype,{}),b.extend({noConflict:function(){return window.$===b&&(window.$=a),b},now:function(){return(new Date).toLocalString()},getTime:function(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),f=a.getMinutes(),g=a.getSeconds(),h=b+"";return 10>c&&(h+="0"),h+=c+"",10>d&&(h+="0"),h+=d+e+f+g},isType:function(a){return function(b){return Object.prototype.toString.call(b)=="[object "+a+"]"}},isString:function(a){return this.isType("String")(a)},isNumber:function(a){return this.isType("Number")(a)},isFunction:function(a){return this.isType("Function")(a)},isBoolean:function(a){return this.isType("Boolean")(a)},isArray:function(a){return Array.isArray||this.isType("Array")(a)},isNaN:function(a){return a!==a},isNull:function(a){return null===a},isChinese:function(a){return b.regExp.isChinese(a)},setCookie:function(a){b.cookie.setCookie(a)},getCookie:function(a){b.cookie.getCookie(a)},deleteCookie:function(a){b.cookie.deleteCookie(a)},createXHR:function(){return b.ajax.createXHR()},ajax:function(a,c){return b.ajax.send(a,c),this},getMousePos:function(a){return b.Event.getMousePos(a)},getWindowSize:function(){var a=document.documentElement;return{width:window.innerWidth||a&&a.clientWidth||document.body.clientWidth,height:window.innerHeight||a&&a.clientHeight||document.body.clientHeight}},message:function(a){var c=b.UI.MsgBox();c.open("string"==typeof a?{content:a}:a)}}),b.Event={readyEvent:function(a){a||(a=document);var b=window.onload;window.onload="function"!=typeof window.onload?a:function(){b(),a()}},addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,function(){c.call(a)})},removeEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,function(){c.call(a)})},stopEvent:function(a){this.stopPropagation(a),this.preventDefault(a)},stopPropagation:function(a){a=this.getEvent(a),a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){a=this.getEvent(a),a.preventDefault?a.preventDefault():a.returnValue=!1},getEvent:function(a){return a||window.event},getTarget:function(a){return a.target||a.srcElement},getMousePos:function(a){a=this.getEvent(a);var b=a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),c=a.pageY||a.clientY+(document.documentElement.scrollTop||document.body.scrollTop);return{x:b,y:c}},getWheelDelta:function(a){return a=this.getEvent(a),a.wheelDelta?a.wheelDelta:40*-a.detail},getButton:function(a){a=this.getEvent(a);var b={left:!1,middle:!1,right:!1};if(a.toString&&-1!=a.toString().indexOf("MouseEvent"))switch(a.button){case 0:b.left=!0;break;case 1:b.middle=!0;break;case 2:b.right=!0}else{if(!a.button)return!1;switch(a.button){case 1:b.left=!0;break;case 2:b.right=!0;break;case 3:b.left=!0,b.right=!0;break;case 4:b.middle=!0;break;case 5:b.left=!0,b.middle=!0;break;case 6:b.middle=!0,b.right=!0;break;case 7:b.left=!0,b.middle=!0,b.right=!0}}return b},getCharCode:function(a){return"number"==typeof a.charCode?a.charCode:a.keyCode}},b.dom={id:function(a){return document.getElementById(a)},tag:function(a,b){return(b||document).getElementsByTagName(a)},className:function(a,b,c){c=c||document;for(var d=b?c.getElementsByTagName(b):c.all,e=[],f=0,g=d.length;g>f;f++)this.hasClass(d[f],a)&&e.push(d[f]);return e},getStyle:function(a,b){if(a.style[b])return a.style[b];if(a.currentStyle)return a.currentStyle[b];if(document.defaultView&&document.defaultView.getComputedStyle){b=b.replace(/([A-Z])/g,"-$1"),b=b.toLowerCase();var c=document.defaultView.getComputedStyle(a,"");return c&&c.getPropertyValue(b)}return null},setStyle:function(a,b,c){if("undefined"!=typeof c)a.style.setProperty?a.style.setProperty(b,c):a.style[camelize(b)]=c;else for(p in b)b.hasOwnProperty(p)&&(a.style.setProperty?a.style.setProperty(p,b[p]):a.style[camelize(p)]=b[p]);return!0},hasClass:function(a,b){b=b.replace(/\-/g,"\\-");var c=new RegExp("\\s*"+b+"\\s*");return c.test(a.className)?!0:!1},addClass:function(a,b){""===a.className?a.className=b:this.hasClass(a,b)||(a.className+=" "+b)},removeClass:function(a,b){if(""!==a.className&&this.hasClass(a,b)){for(var c=getClassNames(a),d=c.length,e=d-1;e>=0;e--)c[e]===b&&delete c[e];return a.className=c.join(" "),d==c.length?!1:!0}},getClassNames:function(a){return a.className.replace(/\s+/," ").split(" ")},camelize:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},trim:function(a){return a.replace(/^\s+|\s+$/g,"")}},b.cookie={setCookie:function(a){var b=a.name+"="+escape(a.value)+"; ";a.days&&(b+="expires="+new Date((new Date).getTime()+24*a.days*60*60*1e3).toGMTString()+"; "),a.domain&&(b+="domain="+a.domain+"; "),a.path&&(b+="path="+a.path+"; "),a.secure&&(b+="secure"),document.cookie=b},getCookie:function(a){var b=new RegExp("(^|s*)"+a+"=([^;]*)(;|$)"),c=document.cookie.match(b);return c?unescape(c[2]):"No cookie!"},deleteCookie:function(){var a=new Date;a.setTime(a.getTime()-1e5);var c=b.cookie.getCookie(name);c&&(document.cookie=name+"=;expires="+a.toGMTString())}},b.ajax={createXHR:function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if(!window.ActiveXObject)return window.alert("不能创建XMLHttpRequest对象实例"),!1;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}},send:function(a,c){function d(){4==e.readyState&&(e.status>=200&&e.status<300?f.onsuccess(e):f.onerror(e))}if(b.ajax.createXHR){var e=b.ajax.createXHR(),f={method:"GET",querystring:"",onerror:function(){},onsuccess:function(){}};for(var g in c)f[g]=c[g];e.open(f.method,a,!0),e.onreadystatechange=d,e.send(f.querystring)}}},b.canvas={},b.regExp={isChinese:function(a){return/[\u4E00-\uFA29]+|[\uE7C7-\uE7F3]+/.test(a)},isIdentifier:function(a){return/^[1-9]\d{5}[1|2]\d{3}((0\d)|(1[0-2]))(([0-2]\d)|(3[0-1]))(\d{4}|\d{3}x)$/.test(a)},isLoginId:function(a){return/[A-Za-z0-9_]/.test(a)}},b.UI={MsgBox:function(){return{box:null,mask:null,BoxWidth:300,BoxHeight:200,Title:"Hi buddy",Content:'config {<br>&nbsp;&nbsp;width: 300,<br>&nbsp;&nbsp;height: 300,<br>&nbsp;&nbsp;title: "Hi buddy",<br>&nbsp;&nbsp;content: "Content here",<br>&nbsp;&nbsp;isBar: 0<br>}',IsBar:1,IsShut:1,init:function(a){return a&&(this.BoxWidth=a.width||this.BoxWidth,this.BoxHeight=a.height||this.BoxHeight,this.Title=a.title||this.Title,this.Content=a.content||this.Content,this.IsBar=void 0!==a.isBar?a.isBar:this.IsBar,this.IsShut=void 0!==a.isShut?a.isShut:this.IsShut),this},open:function(a){return this.init(a),this.createBox(),this.createMask(),this.box},close:function(){this.removeBox(),this.removeMask()},createBox:function(){if(this.box=this.box||document.createElement("div"),this.setBoxStyle(),document.body.appendChild(this.box),this.zoomIn(),this.IsBar){if(this.setDragListener(),this.IsShut){var a=b.dom.id("box_shut"),c=this;b.Event.addEvent(a,"click",function(){c.fillTitle(""),c.zoomOut()})}}else{var c=this;b.Event.addEvent(this.box,"click",function(){c.zoomOut()})}},setBoxStyle:function(){this.box.id="box",b.dom.setStyle(this.box,{background:"#222",position:"absolute",border:"4px solid #000",width:this.BoxWidth+"px",height:this.BoxHeight+"px",left:this.getLeft(this.BoxWidth)+"px",top:this.getTop(this.BoxHeight)+"px",display:"none","test-align":"left",color:"white","box-shadow":"#000 3px 3px 4px","z-index":1001,overflow:"hidden"});var a="";this.IsBar&&(a+='<div id="bar" style="line-height: 28px;padding-left:1em;background:#000;cursor:move;">'+this.Title,this.IsShut&&(a+='<a id="box_shut" style="color:#fff;position:absolute;cursor:pointer;font-weight:bold;top:0px;right:10px;text-decoration: none;">×</a>'),a+="</div>"),a+='<div id="content" style="padding: 1em 1em;"></div>',this.box.innerHTML=a},createMask:function(){this.mask=this.mask||document.createElement("div"),this.setMaskStyle(),document.body.appendChild(this.mask)},setMaskStyle:function(){this.mask.id="mask",b.dom.setStyle(this.mask,{background:"#000",position:"fixed",width:"100%",height:"100%",left:0,top:0,display:"block",opacity:.5,"z-index":1e3})},removeBox:function(){document.body.removeChild(this.box)},removeMask:function(){document.body.removeChild(this.mask)},normalIn:function(){this.box.style.display="block",this.fillContent(this.Content)},zoomIn:function(){var a,b,c=1,d=setInterval(function(){return a=this.BoxWidth*c/10,b=this.BoxHeight*c/10,10===c?(clearInterval(d),void this.fillContent(this.Content)):(this.box.style.display="block",this.box.style.width=a+"px",this.box.style.height=b+"px",this.box.style.left=this.getLeft(a)+"px",this.box.style.top=this.getTop(b)+"px",c++,void 0)}.bind(this),10)},zoomOut:function(){var a,b,c=10;this.fillContent(""),this.removeMask();var d=this.getLeft(this.BoxWidth)-parseInt(this.box.style.left),e=this.getTop(this.BoxHeight)-parseInt(this.box.style.top),f=setInterval(function(){return a=this.BoxWidth*c/10,b=this.BoxHeight*c/10,1===c?(clearInterval(f),void this.removeBox()):(this.box.style.width=a+"px",this.box.style.height=b+"px",this.box.style.left=this.getLeft(a)-d+"px",this.box.style.top=this.getTop(b)-e+"px",c--,void 0)}.bind(this),10)},setDragListener:function(){var a=b.dom.id("bar"),c=this,d={startX:0,startY:0,_X:0,_Y:0,isDrag:!1};b.Event.addEvent(a,"mousedown",function(a){var a=a||window.event;d.isDrag=!0,d._X=a.clientX,d._Y=a.clientY,d.startX=c.box.style.left,d.startY=c.box.style.top}),b.Event.addEvent(document,"mouseup",function(){d.isDrag=!1}),b.Event.addEvent(document,"mousemove",function(a){var a=a||window.event;if(d.isDrag){var b=a.clientX,e=a.clientY,f=b-d._X+parseInt(d.startX),g=e-d._Y+parseInt(d.startY);c.box.style.left=f+"px",c.box.style.top=g+"px"}})},fillContent:function(a){b.dom.id("content").innerHTML=a},fillTitle:function(a){b.dom.id("bar").innerHTML=a},getLeft:function(a){return(document.body.offsetWidth-a)/2},getTop:function(a){return(document.body.offsetHeight-a)/2+document.documentElement.scrollTop}}},Logger:function(){},autoComp:function(){}}}();